create database office_management;
use office_management;
create table om_user (
	id int primary key auto_increment,
    om_username nvarchar(50) not null,
    om_password nvarchar(50) not null
);
create table om_checkin(
	id int primary key auto_increment,
    note nvarchar(255),
    created_date datetime not null,
    modified_date datetime not null,
    user_id int not null,
    foreign key(user_id) references om_user(id)
);
create table om_checkout(
	id int primary key auto_increment,
    note nvarchar(255),
    created_date datetime not null,
    modified_date datetime not null,
    user_id int not null,
    foreign key(user_id) references om_user(id)
);

CREATE TABLE `office_management`.`om_report` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `user_id` INT NOT NULL,
  `checkin_id` INT NOT NULL,
  `checkout_id` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `checkout_id_idx` (`checkout_id` ASC),
  INDEX `checkin_id_idx` (`checkin_id` ASC),
  INDEX `user_id_idx` (`user_id` ASC),
  CONSTRAINT `user_id`
    FOREIGN KEY (`user_id`)
    REFERENCES `office_management`.`om_user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `checkin_id`
    FOREIGN KEY (`checkin_id`)
    REFERENCES `office_management`.`om_checkin` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `checkout_id`
    FOREIGN KEY (`checkout_id`)
    REFERENCES `office_management`.`om_checkout` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

2018-04-17 18:30:15