create database office_management;
use office_management;
create table om_user (
	id int primary key,
    om_username nvarchar(50) not null,
    om_password nvarchar(50) not null
);
create table om_checkin(
	id int primary key,
    note nvarchar(255),
    created_date datetime not null,
    modified_date datetime not null,
    user_id int not null,
    foreign key(user_id) references om_user(id)
);
create table om_checkout(
	id int primary key,
    note nvarchar(255),
    created_date datetime not null,
    modified_date datetime not null,
    user_id int not null,
    foreign key(user_id) references om_user(id)
);

CREATE TABLE `om_report` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `checkin_id` int(11) NOT NULL,
  `checkout_id` int(11) DEFAULT NULL,
  `work_in_minute` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `checkout_id_idx` (`checkout_id`),
  KEY `checkin_id_idx` (`checkin_id`),
  KEY `user_id_idx` (`user_id`),
  CONSTRAINT `checkin_id` FOREIGN KEY (`checkin_id`) REFERENCES `om_checkin` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `checkout_id` FOREIGN KEY (`checkout_id`) REFERENCES `om_checkout` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `user_id` FOREIGN KEY (`user_id`) REFERENCES `om_user` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;